MANILA, Philippines--Philippine troops on Sunday were battling a final group of about 30 pro-Islamic State group militants who were surrounded in one building with all their hostages gone as a nearly five-month siege neared its end in southern Marawi city, a military official said.

Army Col. Romeo Brawner said troops were aiming to end the crisis before midnight Sunday. He said the remaining gunmen, who include some Indonesian and Malaysian fighters, have the option of surrendering, or they can either be captured or killed.

"Our government forces will try to do everything to finish the firefight today," Brawner said in a news conference in Marawi. He said the battle area centered in a two-story building near Lake Lanao where the firefight continued to rage at noon.

"It's either they all get killed, because they're determined to die inside, or we capture them or they surrender," he said.

A gradual withdrawal of military forces was underway with the easing of the fighting, which has left at least 1,131 people dead, including 919 militants and 165 soldiers and policemen. Troops continued to ask the gunmen, who are leaderless and running low on ammunition, to surrender by using loudspeakers, Brawner said.

Military chief of staff Gen. Eduardo Ano said some of the remaining militants were "suicidal."

Hundreds of militants, many waving Islamic State group-style black flags, launched the siege on May 23 in Marawi, a bastion of Islamic faith in the south of the largely Roman Catholic Philippines, by seizing the lakeside city's central business district and outlying communities. They ransacked banks and shops, including gun stores, looted houses and smashed statues in a Roman Catholic cathedral, according to the military.

At least 1,780 of the hostages seized by the militants, including a Roman Catholic priest, were rescued, and a final group of 20 captives were freed overnight, Brawner said. That left the gunmen with none of the hostages they had used as human shields to slow the military advance for months.

The disastrous uprising, which has displaced hundreds of thousands of Marawi residents, erupted as the Philippines was hosting annual summit meetings of Southeast Asian nations and their Asian and Western counterparts, including the United States and Australia. The two governments have deployed surveillance aircraft and drones to help Filipino troops rout the Marawi militants.

The siege has sparked fears that the Islamic State group may gain a foothold in Southeast Asia by influencing and providing funds to local militants as it suffers battle defeats in Syria and Iraq.

Last Monday, troops killed the final two surviving leaders of the siege, including Isnilon Hapilon, who is listed among the FBI's most-wanted terror suspects in the world, and Omarkhayam Maute. Following their deaths, President Rodrigo Duterte traveled near the main scene of battle and declared Marawi had been essentially liberated from terrorist influence, although skirmishes with a few dozen gunmen continued.

DNA tests done in the United States requested by the Philippine military have confirmed the death of Hapilon, according to the U.S. Embassy in Manila. Washington has offered a bounty of up to $5 million for Hapilon, who had been blamed for kidnappings for ransom of American nationals and other terrorist attacks.

Among the foreign militants believed to be with the remaining gunmen in Marawi were Malaysian militant Amin Baco and an Indonesian known only as Qayyim. Both have plotted attacks and provided combat training to local militants for years but have eluded capture in the south.