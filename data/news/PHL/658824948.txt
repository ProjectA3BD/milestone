Government troops stand on guard during a checkpoint along a main highway in Pantar town, Lanao del Norte, after residents started to evacuate their hometown of Marawi city, southern Philippines. Reuters

MARAWI, Philippines - Troops began clearing out a southern Philippine city besieged by Islamist militants, with hostilities easing on Thursday after thousands fled as the rebels seized large parts of the city and torched buildings in a battle with government forces.

Hundreds of civilians, including children, were sheltering in a military camp in Marawi City, where militants linked to the Islamic State group had also taken Christians hostage and set free more than 100 prisoners from two jails.

President Rodrigo Duterte imposed martial law late on Tuesday on impoverished Mindanao, the country's second-largest island, to prevent the spread of extremism after rebels rampaged through the city of 200,000 people.

Marawi Mayor Majul Gandamra said some rebels from the Maute, a militant group that has pledged allegiance to Islamic State, were still holed up in buildings and sporadic gunfire could be heard. He said troops had isolated the guerrillas but were not engaging them, and that the rebels were posting images on social media to make known their sustained presence in Marawi.

"They are still there, surrounded by our military," Gandamra told DZBB radio.

"They are not shooting at anybody specifically."

Islamic State claimed responsibility for the rampage, which flared on Tuesday afternoon, via its Amaq news agency.

The battle started with a failed attempt by security forces to arrest some Maute fighters. Seven government troops and 13 militants had been killed since Tuesday, according to the army.

Details from authorities were sketchy and the status of the hostages taken by the Maute was unclear. It was also not known whether civilians had been killed or wounded, or how many rebels remained and how many had retreated.

Marawi is located in Lanao del Sur province, a stronghold of the Maute, a fierce, but little-known group that has been a tricky opponent for the military. Its activities are a source of concern for Mindanao native Duterte, who is familiar with separatist unrest but alarmed by the presence of radicals inspired by Islamic State's radical agenda.

Duterte threatened harsh measures to prevent extremists taking a hold in Mindanao and said martial law would remain in place for as long as it took to restore order. It was not clear what exactly Duterte planned to do to achieve that.

House Speaker Pantaleon Alvarez said Congress had received a mandatory report from Duterte explaining his martial law declaration and lawmakers would discuss it on Monday.

Martial law applies for an initial 60 days under the constitution, but that could be shortened or lengthened depending on security considerations, Alvarez said.

Human rights experts have expressed concern about possible abuses by the military and police in places under martial rule and say the conduct of security forces during Duterte's deadly anti-drugs campaign has not inspired confidence.

Alvarez sought to ally those fears.

"Let us not worry about this declaration. There are safeguards in our constitution to prevent abuses," he said.