BANGKOK--Thailand's state prosecutor Thursday filed criminal charges against former Prime Minister Yingluck Shinawatra for allegedly mishandling a multibillion dollar rice subsidy, underscoring the speed with which the country's ruling junta has moved from reconciliation to retribution following last year's coup d'état.

The prosecution of Ms. Yingluck, who led a democratically elected government until just before last May's military takeover, also appears set to worsen relations with a key ally, the U.S.

Earlier this month the U.S. Embassy's chargé d'affaires was called in to Thailand's foreign ministry for a dressing down after a senior state department official urged the junta to end martial law and suggested that the case against Ms. Yingluck was politically motivated.

The remarks by Daniel Russel , assistant secretary of state for East Asian and Pacific affairs, during a visit to the Thai capital prompted an outpouring of anti-American vitriol from the junta's supporters. Some posted messages such as "Yankees go home" on the embassy's Facebook page, while junta chief Prime Minister Prayuth Chan-ocha complained that U.S. officials don't "understand the way we work."

Political analysts have said the junta's tart response reflects its difficulty in repairing relations with old allies such as the U.S. The task could grow harder now that Gen. Prayuth's administration has largely given up portraying itself as a broker between supporters and opponents of Ms. Yingluck's influential older brother, telecommunications billionaire Thaksin Shinawatra, who was himself ousted as prime minister in 2006.

Ms. Yingluck, meanwhile, denies any wrongdoing in the rice case. She was impeached by Thailand's military-appointed parliament and banned from politics for five years on similar charges last month, prompting her to describe the verdict as the end of democracy and rule of law in Thailand.

Her defenders also have said she shouldn't be put on trial for pursuing an economic policy that helped her secure a landslide election win in 2011.

The idea behind the rice subsidy was to buy up the grain from farmers at up to double the market price. Thailand, then the world's largest exporter, would then hoard it in large warehouses in a bid to drive up global prices.

Instead, Vietnam and India stepped in to fill the void in the market, and rice prices actually fell, leaving Thailand with a paper loss of more than $15 billion. In some cases, investigators say rice smuggled from neighboring Laos and Cambodia was sold to Thailand's government at premium prices.

The office of Thailand's Attorney-General Thursday accused Ms. Yingluck of negligence in refusing to end the rice program once its problems became known.

Judges have still to decide whether to accept the case. If Ms. Yingluck is convicted, she could face up to 10 years in prison. The country's National Anti-Corruption Commission is also recommending that the government file a civil suit against Ms. Yingluck for 600 billion baht, or some $18 billion.

In the meantime, discontent with the junta appears to be growing, albeit slightly. Over the weekend, police detained several students for holding a small anticoup protest in central Bangkok, while the junta is moving to pass legislation that would allow warrantless detentions for up to three months.

These latest security measures mark a further toughening of the junta's resolve.

After seizing power, the junta initially attempted to bring the country's rival political factions together to help prevent a recurrence of the massive street protests that prompted the coup. The tension caused by the lengthy protests coincided with growing nervousness about the health of Thailand's long-serving monarch, King Bhumibol Adulyadej, who is now 87 years old. In the past, the king has helped smooth over some of country's political conflicts.

But in the run-up to last month's impeachment trial, Gen. Prayuth and other leading members of the junta began arguing that they can't reconcile with people accused of criminal acts.

With ties to the U.S. continuing to erode, junta officials privately say they aim to strengthen their diplomatic and economic relations with China and, to a lesser extent, Japan. Among other things, Thailand last year signed an agreement with China to build two new railway lines in the country. Proponents of the project say it will provide new transport links to China, via a similar railway network planned in Laos.

Wilawan Watcharasakwet contributed to this article.

Write to James Hookway at james.hookway@wsj.com